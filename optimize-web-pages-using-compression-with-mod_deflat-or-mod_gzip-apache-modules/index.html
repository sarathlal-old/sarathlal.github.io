<!doctype html> <html lang="en"> <head> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <link rel="canonical" href="https://sarathlal.com/optimize-web-pages-using-compression-with-mod_deflat-or-mod_gzip-apache-modules/"> <title>Optimize web pages using compression with mod_deflat or mod_gzip Apache modules - Sarathlal N</title> <meta name="description" content="Compression is a simple and effective way to optimize web pages by reducing size of web pages using some algorithms. When we reduce the size of our web pages..."> <link rel="icon" href="https://sarathlal.com/favicon.ico" sizes="32x32" /> <link rel="icon" href="https://sarathlal.com/siteicon.png" sizes="152x152" /> <link rel="apple-touch-icon-precomposed" href="https://sarathlal.com/siteicon.png" /> <meta name="msapplication-TileImage" content="https://sarathlal.com/siteicon.png" /> <style> /* Normalize start */ html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none} /* Normalize end */ /* Custom start */ p{font-size:1.25rem;line-height:1.8} body {font-family: -apple-system, system-ui, BlinkMacSystemFont, Roboto, Oxygen, Oxygen-Sans, Ubuntu, Cantarell, "Segoe UI", "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif; color: #3a3a3a;} .container {max-width: 42rem;margin: 0 auto;font-size: 1.25rem; padding:0 1rem;} h1, h2, h3, h4, h5, h6 {color: #4e4e4e; line-height:1.4} pre {font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 1.25rem;} code, kbd, samp {font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 1.15rem;} p code, li code, table code {background-color: #f5f5f5;padding: 0.15rem 0.35rem;border: 1px solid #e2e2e2;border-radius: 2px;color: #c10000} img {max-width: 100%;} .clearfix:after {content: "";display: table;clear: both;} header{margin: 3rem 0 4rem; } header a {text-decoration:none; color: #4e4e4e;} header a:hover {border-bottom: 1px solid #4e4e4e;} header h2 a:hover{border-bottom:none} header h2 {font-size: 1.5rem;letter-spacing: 0.02em; margin-bottom: 0.5rem;} header nav {text-align:left;font-size: 1.1rem;} header nav ul {list-style-type: none;margin: 0;padding: 0;overflow: hidden;} header nav ul li {float: left;line-height: inherit;} header nav ul li a {margin: 0 0.75rem; color: #23527c;} header nav li::after { content: "/";color: #a0a0a0;} header nav li:last-child::after {content: "";} header nav li:last-child a {margin-right:0;} header nav li:first-child a {margin-left:0;} a{color:#23527c; text-decoration:none} a:hover{border-bottom: 1px solid #23527c;} li{line-height:1.8} pre.highlight {margin-bottom: 1rem;padding: 0.5rem 0.75rem;border-radius: .15rem;background-color: #444; color: #f0f0f0} pre {display: block;margin: 0 0 1rem;font-size: .875rem;line-height: 1.4;overflow: auto;} footer{margin: 0 0 4rem;} .cta-section {margin: 3rem 0;padding: 1rem 0;border-top: 4px dashed #ff7a7a;border-bottom: 4px dashed #ff7a7a;} .cta-section a.btn{border: 1px solid #ababab;padding: 0.5rem 1.5rem;border-radius: 0.5rem;background-color: #ffffff; transition:all 0.3s ease;} blockquote{border-left: 5px solid #e3e3e3;padding-left: 15px;margin-left: 10px;} /* Custom end */ </style> </head> <body itemscope itemtype="http://schema.org/WebPage"> <div class="container"> <!--[if lte IE 9]> <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p> <![endif]--> <header class="clearfix"> <h2><a href="https://sarathlal.com">Sarathlal N</a></h2> <nav> <ul> <li><a href="https://sarathlal.com/about/">About Me</a></li> <li><a href="https://sarathlal.com/archive/">Archive</a></li> </ul> </nav> </header> <article class="post" itemscope itemtype="http://schema.org/CreativeWork"> <h1 class="entry-title" itemprop="headline">Optimize web pages using compression with mod_deflat or mod_gzip Apache modules</h1> <p>Compression is a simple and effective way to optimize web pages by reducing size of web pages using some algorithms. When we reduce the size of our web pages, it reduce the load time for that web page. It save a lot of bandwidth and serve our web pages quickly. The compression can saves around 50 to 70 percent of the file size.</p> <p>When we hit a URL from our web browser, our browser send a request to web server to deliver the content in corresponding file. Then the web server check that if the file is available at there. If it is available, web server send a response code (200 K) and then start to send the whole content associated with that file to web browser. This is normally happened in Web.</p> <p>Just consider that the size of our file in web server is 250KB. When some one hit the URL corresponding to that file, web server understand that the file is available at there, then send response code and start to send the whole file in to his web browser. He want to wait till his web browser receive the whole 250KB file to read that web page.</p> <p>If we can deliver the same content with a reduced file size of 50KB, the visitor’s web browser can quickly receive that file than 250KB file. That means, when we reduce the file size, it reduce load time and increase page speed of web pages.</p> <p>we can reduce the file size of Web pages by compressing it using some modules in web server softwares. This is a major part in web optimization. Through this article, I like to share my knowledge about compression of web content using two modules, mod_deflate and mod_gzip in Apache web servers.</p> <h2 id="top-benefits-by-using-compression">Top benefits by using compression</h2> <ol> <li>A better user-experience, since web pages are load quickly.</li> <li>SEO benefits, search engines like sites that load faster.</li> <li>Reduced server load, due to small file size.</li> </ol> <h2 id="why-compression-is-possible-in-web-environment">Why compression is possible in Web environment</h2> <p>We already know that Web pages are almost HTML and CSS files. The CSS and HTML files use a lot of repeated text, whitespace and similar tags. The compression algorithm locates similar strings within a text file and replaces those strings temporarily to make the overall file size smaller.</p> <ul> <li>First the browser sends a header telling the server it accepts compressed content. :- <code class="language-plaintext highlighter-rouge">Accept-Encoding: gzip, deflate</code></li> <li>Then the server sends a response if the content is actually compressed. :- <code class="language-plaintext highlighter-rouge">Content-Encoding: gzip</code></li> <li>Then the browser receives the compressed file which is significantly smaller.</li> <li>If the server doesn’t send the content-encoding response header, it means the file is not compressed and browser want to receive the uncompressed version.</li> </ul> <h2 id="two-apache-modules-for-compression">Two Apache modules for compression</h2> <p>The Apache use two modules for compression and decompression.</p> <ol> <li>mod_deflate</li> <li>mod_gzip</li> </ol> <p>This two modules are based on same deflate algorithm. But the mod_gzip is little more than mod_deflate.</p> <p>We can consider that output of mod_Gzip have the same output of mod_deflate with a few dozen byte header wrapped around it including a checksum.</p> <p>Due to the checksum, mod_gzip is slower than mod_deflate in compression and decompression. Also mod_gzip use little more resource than mod_deflate due to this checksum.</p> <p>The mod_deflate is is easy to configure and well documented. If you are using Apache v2, the mod_deflate is already installed with Apache. But some old browsers are broken when using mod_deflate.</p> <p>The compressed file by mod_gzip is little more than mod_deflate compressed file due to header and checksum. Additionally some shared and reseller host provider not support mod_gzip.</p> <p>Any way this two modules are commonly used to compress web content. To utilize any compression, they must be configured and enabled on server. Then we want to add specified codes in our directory level configuration file like <code class="language-plaintext highlighter-rouge">.htaccess</code>.</p> <h2 id="enable-compression-on-apache-server-using-mod_deflate">Enable compression on Apache server using mod_deflate</h2> <ul> <li>First Open <code class="language-plaintext highlighter-rouge">.htaccess</code> file in your web server*.</li> <li>Add below lines of code in to your <code class="language-plaintext highlighter-rouge">.htaccess</code> file.</li> </ul> <p>&lt;/ul&gt;</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	# compress text, HTML, JavaScript, CSS, and XML
	AddOutputFilterByType DEFLATE text/plain
	AddOutputFilterByType DEFLATE text/html
	AddOutputFilterByType DEFLATE text/xml
	AddOutputFilterByType DEFLATE text/css
	AddOutputFilterByType DEFLATE application/xml
	AddOutputFilterByType DEFLATE application/xhtml+xml
	AddOutputFilterByType DEFLATE application/rss+xml
	AddOutputFilterByType DEFLATE application/javascript
	AddOutputFilterByType DEFLATE application/x-javascript

	# remove browser bugs
	BrowserMatch ^Mozilla/4 gzip-only-text/html
	BrowserMatch ^Mozilla/4\.0[678] no-gzip
	BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
	Header append Vary User-Agent
</code></pre></div></div> <ul> <li>Save <code class="language-plaintext highlighter-rouge">.htaccess</code> file</li> <li>Test the performance and page size after compression.</li> </ul> <h2 id="enable-compression-on-apache-server-using-mod_gzip">Enable compression on Apache server using mod_gzip</h2> <ul> <li>If your host support mod_gzip, add below lines of code in to <code class="language-plaintext highlighter-rouge">.htaccess</code> file instead of above code snippet.</li> </ul> <p>&lt;/ul&gt;</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	&lt;ifModule mod_gzip.c&gt;
	mod_gzip_on Yes
	mod_gzip_dechunk Yes
	mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
	mod_gzip_item_include handler ^cgi-script$
	mod_gzip_item_include mime ^text/.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_exclude mime ^image/.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
	&lt;/ifModule&gt;
</code></pre></div></div> <ul> <li>Then save <code class="language-plaintext highlighter-rouge">.htaccess</code> file and test the performance with page size after compression.</li> </ul> <h3 id="notes">Notes</h3> <p>*You can access your .htaccess file through cPanel by clicking on the File Manager. When the popup box appears, click on the Web Root option and make sure that the “Show hidden files” option is checked.</p> <h3>Recent Posts</h3> <ol> <li><a href="https://sarathlal.com/git-workflow-bitbucket-jira/"> Streamlining Development - Our Journey with Git, Bitbucket, and Jira</a></li> <li><a href="https://sarathlal.com/optimizing-woocommerce-slow-admin-side-payment-gateway-plugin/"> The Amazing Adventure - Solving the Mysteries of a WooCommerce Store</a></li> <li><a href="https://sarathlal.com/installing-docker-compose-linux-mint-20/"> Installing Docker Compose in Linux Mint 20</a></li> <li><a href="https://sarathlal.com/postgresql-database-with-django/"> Using PostgreSQL database with Django</a></li> <li><a href="https://sarathlal.com/find-largest-number-in-list-python/"> Find largest number in a list of numbers - Python</a></li> </ol> <p class="entry-meta"> <span class="entry-time text-muted">This article was published on <time class="entry-time" itemprop="datePublished" datetime="2014-01-19T00:00:00+05:30">January 19, 2014</time></span> </p> <hr> <h3>Your Questions / Comments</h3> <p class="after-post">If you found this article interesting, found errors, or just want to discuss about it, please <a href="/about/">get in touch</a>.</p> </article> <!-- Footer --> <footer> </footer> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-46959192-1', 'auto'); ga('send', 'pageview'); </script> </div> </body> </html>
