<!doctype html> <html lang="en"> <head> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <link rel="canonical" href="https://sarathlal.com/using-google-recaptcha-with-php/"> <title>Using Google reCAPTCHA with PHP - Sarathlal N</title> <meta name="description" content="The reCAPTCHA is a Google captcha service &amp; it is widely used on website &amp; blogs to prevent spam comments &amp; automated extraction of data from web..."> <link rel="icon" href="https://sarathlal.com/favicon.ico" sizes="32x32" /> <link rel="icon" href="https://sarathlal.com/siteicon.png" sizes="152x152" /> <link rel="apple-touch-icon-precomposed" href="https://sarathlal.com/siteicon.png" /> <meta name="msapplication-TileImage" content="https://sarathlal.com/siteicon.png" /> <style> /* Normalize start */ html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none} /* Normalize end */ /* Custom start */ p{font-size:1.25rem;line-height:1.8} body {font-family: -apple-system, system-ui, BlinkMacSystemFont, Roboto, Oxygen, Oxygen-Sans, Ubuntu, Cantarell, "Segoe UI", "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif; color: #3a3a3a;} .container {max-width: 42rem;margin: 0 auto;font-size: 1.25rem; padding:0 1rem;} h1, h2, h3, h4, h5, h6 {color: #4e4e4e; line-height:1.4} pre {font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 1.25rem;} code, kbd, samp {font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 1.15rem;} p code, li code, table code {background-color: #f5f5f5;padding: 0.15rem 0.35rem;border: 1px solid #e2e2e2;border-radius: 2px;color: #c10000} img {max-width: 100%;} .clearfix:after {content: "";display: table;clear: both;} header{margin: 3rem 0 4rem; } header a {text-decoration:none; color: #4e4e4e;} header a:hover {border-bottom: 1px solid #4e4e4e;} header h2 a:hover{border-bottom:none} header h2 {font-size: 1.5rem;letter-spacing: 0.02em; margin-bottom: 0.5rem;} header nav {text-align:left;font-size: 1.1rem;} header nav ul {list-style-type: none;margin: 0;padding: 0;overflow: hidden;} header nav ul li {float: left;line-height: inherit;} header nav ul li a {margin: 0 0.75rem; color: #23527c;} header nav li::after { content: "/";color: #a0a0a0;} header nav li:last-child::after {content: "";} header nav li:last-child a {margin-right:0;} header nav li:first-child a {margin-left:0;} a{color:#23527c; text-decoration:none} a:hover{border-bottom: 1px solid #23527c;} li{line-height:1.8} pre.highlight {margin-bottom: 1rem;padding: 0.5rem 0.75rem;border-radius: .15rem;background-color: #444; color: #f0f0f0} pre {display: block;margin: 0 0 1rem;font-size: .875rem;line-height: 1.4;overflow: auto;} footer{margin: 0 0 4rem;} .cta-section {margin: 3rem 0;padding: 1rem 0;border-top: 4px dashed #ff7a7a;border-bottom: 4px dashed #ff7a7a;} .cta-section a.btn{border: 1px solid #ababab;padding: 0.5rem 1.5rem;border-radius: 0.5rem;background-color: #ffffff; transition:all 0.3s ease;} blockquote{border-left: 5px solid #e3e3e3;padding-left: 15px;margin-left: 10px;} /* Custom end */ </style> </head> <body itemscope itemtype="http://schema.org/WebPage"> <div class="container"> <!--[if lte IE 9]> <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p> <![endif]--> <header class="clearfix"> <h2><a href="https://sarathlal.com">Sarathlal N</a></h2> <nav> <ul> <li><a href="https://sarathlal.com/about/">About Me</a></li> <li><a href="https://sarathlal.com/archive/">Archive</a></li> </ul> </nav> </header> <article class="post" itemscope itemtype="http://schema.org/CreativeWork"> <h1 class="entry-title" itemprop="headline">Using Google reCAPTCHA with PHP</h1> <p>The reCAPTCHA is a Google captcha service &amp; it is widely used on website &amp; blogs to prevent spam comments &amp; automated extraction of data from websites.</p> <p>Today we are going to use reCAPTCHA service in our PHP web application to familiarize with reCAPTCHA &amp; its usage.</p> <p>Before implementing reCAPTCHA, just know that it was started as a college project in Carnegie Mellon University’s Pittsburgh campus, and acquired by Google in September 2009.</p> <p>The user submitted text are used to digitize books and building machine learning datasets. More than 200 million ReCaptcha’s are entered every day and that relates to about 150,000 man hours of work!</p> <p>Anyway, if we want to use reCAPTCHA, first we want to <a href="https://www.google.com/recaptcha/admin#whyrecaptcha">sign up</a> for reCAPTCHA service. We can use our Google account for this purpose.</p> <p>After sign up, just add our domain name. Then the reCAPTCHA service will generate some special keys for us. The reCAPTCHA only works on our specified domain &amp; its sub domains only.</p> <p>By default, all keys work on <code class="language-plaintext highlighter-rouge">localhost</code> (or <code class="language-plaintext highlighter-rouge">127.0.0.1</code>). So for testing purpose, if we don’t have a domain name yet, we can use a demo domain name.</p> <p>Before any further steps, note down our special keys for our domain. They are known as public &amp; private keys. We want to use them in next steps.</p> <p>To simply use reCAPTCHA with PHP, we want to download reCAPTCHA PHP library from <a href="http://code.google.com/p/recaptcha/downloads/list?q=label:phplib-Latest">here</a>. We only need a single file (<code class="language-plaintext highlighter-rouge">recaptchalib.php</code>) from that collection.</p> <h2 id="client-side--how-to-make-the-captcha-image-show-up">Client Side – How to make the CAPTCHA image show up</h2> <p>Normally we use captchas in forms &amp; user submissions. So to display reCAPTCHA in a form, we want to insert a small snippet of code inside the <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> element where the reCAPTCHA widget will be placed.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require_once('recaptchalib.php');
$publickey = "our_public_key"; // we got this from the signup page
echo recaptcha_get_html($publickey);
</code></pre></div></div> <p>In this code snippet, first line include our downloaded PHP <code class="language-plaintext highlighter-rouge">recaptchalib.php</code>. The second line is about our public key. Just copy paste our public key at there.</p> <p>Now our HTML form in PHP page look like below one.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form method="post" action="verify.php"&gt;
	&lt;?php
	  require_once('recaptchalib.php');
	  $publickey = "your_public_key"; // you got this from the signup page
	  echo recaptcha_get_html($publickey);
	?&gt;
	&lt;input type="submit" /&gt;
&lt;/form&gt;
</code></pre></div></div> <h2 id="server-side--how-to-test-if-the-user-entered-the-right-answer">Server Side – How to test if the user entered the right answer</h2> <p>In our form, the target to submit data is <code class="language-plaintext highlighter-rouge">verify.php</code>. So we add another snippet of code at the top of our form target file.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
require_once('recaptchalib.php');
$privatekey = "our_private_key";
$resp = recaptcha_check_answer ($privatekey,
							$_SERVER["REMOTE_ADDR"],
							$_POST["recaptcha_challenge_field"],
							$_POST["recaptcha_response_field"]);

if (!$resp-&gt;is_valid) {
  // What happens when the CAPTCHA was entered incorrectly
  echo "You are not human!";
} else {
  // our code here to handle a successful verification
  echo "You are verified as human!";
}
?&gt;
</code></pre></div></div> <p>For simplicity, I just echo a message according to verification. We want to replace that messages with our actual code to be happened after verification.</p> <p>Try this on our localhost &amp; surely it will help us in our upcoming projects.</p> <h3>Recent Posts</h3> <ol> <li><a href="https://sarathlal.com/git-workflow-bitbucket-jira/"> Streamlining Development - Our Journey with Git, Bitbucket, and Jira</a></li> <li><a href="https://sarathlal.com/optimizing-woocommerce-slow-admin-side-payment-gateway-plugin/"> The Amazing Adventure - Solving the Mysteries of a WooCommerce Store</a></li> <li><a href="https://sarathlal.com/installing-docker-compose-linux-mint-20/"> Installing Docker Compose in Linux Mint 20</a></li> <li><a href="https://sarathlal.com/postgresql-database-with-django/"> Using PostgreSQL database with Django</a></li> <li><a href="https://sarathlal.com/find-largest-number-in-list-python/"> Find largest number in a list of numbers - Python</a></li> </ol> <p class="entry-meta"> <span class="entry-time text-muted">This article was published on <time class="entry-time" itemprop="datePublished" datetime="2014-01-26T00:00:00+05:30">January 26, 2014</time></span> </p> <hr> <h3>Your Questions / Comments</h3> <p class="after-post">If you found this article interesting, found errors, or just want to discuss about it, please <a href="/about/">get in touch</a>.</p> </article> <!-- Footer --> <footer> </footer> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-46959192-1', 'auto'); ga('send', 'pageview'); </script> </div> </body> </html>
